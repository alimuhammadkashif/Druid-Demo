{% import _self as menus %}

{#
  We call a macro which calls itself to render the full tree.
  @see http://twig.sensiolabs.org/doc/tags/macro.html
#}
{{ menus.menu_links(items, attributes, 0) }}

{% macro menu_links(items, attributes, menu_level) %}
  {% import _self as menus %}
  {% if items %}
    <div class="main-menu">
      {% for item in items %}
        <div class="main-menu__item">
          {{ link(item.title, item.url, {'class': ['main-menu__link', item.in_active_trail ? 'is-active']}) }}
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endmacro %}
